<div class="tab-pane fade" id="team">
    <form action="/admin/team" method="POST" enctype="multipart/form-data" class="bg-white p-4 rounded shadow-sm mb-4">
        <h3>Add Team Member</h3>

        <input class="form-control mb-2" name="fullName" placeholder="Full Name" required />
        <input class="form-control mb-2" name="role" placeholder="Role" required />
        <textarea class="form-control mb-2" name="bio" placeholder="Short Bio" rows="3"></textarea>

        <!-- Replace URL input with file upload -->
        <label class="form-label">Profile Image</label>
        <input type="file" class="form-control mb-3" name="image" accept="image/*" required />

        <button class="btn btn-primary">Add Member</button>
    </form>

    <h3>Existing Team</h3>
    <table class="table table-striped align-middle">
        <thead>
            <tr>
                <th>Name</th>
                <th>Role</th>
                <th>Bio</th>
                <th>Image</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <% teamMembers.forEach(m=> { %>
                <tr>
                    <td>
                        <%= m.fullName %>
                    </td>
                    <td>
                        <%= m.role %>
                    </td>
                    <td>
                        <%= m.bio %>
                    </td>
                    <td>
                        <img src="https://www.troycityafrica.com/<%= m.imageUrl %>"
                            style="height:40px; border-radius:4px;" />
                    </td>
                    <td>
                        <!-- Edit Button -->
                        <button type="button" class="btn btn-warning btn-sm me-2 edit-btn" data-id="<%= m.id %>"
                            data-name="<%= m.fullName %>" data-role="<%= m.role %>" data-bio="<%= m.bio %>">
                            <i class="fas fa-edit"></i> Edit
                        </button>


                        <!-- Delete Form -->
                        <form action="/team/delete/<%= m.id %>" method="POST" class="d-inline"
                            onsubmit="return confirm('Are you sure you want to delete this team member?');">
                            <button type="submit" class="btn btn-danger btn-sm">
                                <i class="fas fa-trash-alt"></i> Delete
                            </button>
                        </form>
                    </td>
                </tr>
                <% }) %>
        </tbody>
    </table>

    <!-- Hidden Edit Modal -->
    <div class="modal fade" id="editTeamModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <form id="editTeamForm" method="POST" enctype="multipart/form-data" class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Edit Team Member</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" name="id" id="editId">
                    <input type="text" class="form-control mb-2" name="fullName" id="editName" placeholder="Full Name"
                        required>
                    <input type="text" class="form-control mb-2" name="role" id="editRole" placeholder="Role" required>
                    <textarea class="form-control mb-2" name="bio" id="editBio" placeholder="Bio" rows="3"></textarea>
                    <label class="form-label">Change Image (optional)</label>
                    <input type="file" class="form-control mb-3" name="image" accept="image/*">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-success">Save Changes</button>
                </div>
            </form>
        </div>
    </div>
</div>